<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport"  content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="generator" content="Slide Show (S9) v4.1.0 on Ruby 2.5.1 (2018-03-29) [i386-linux-gnu]">
<meta name="author"    content="Your Name Here">

<title>YUUKIToriyama/wakaba</title>

<!-- Don't alter this, CSSS needs it to work -->
<link href="slideshow.css" rel="stylesheet">

<!-- Theme-specific styles go here (themes can be reused in multiple talks) -->
<link href="theme.css" rel="stylesheet">

<!-- Talk-specific styles go here -->
<!-- GB: changed fixed name (style.css) to variable -->
<link href="" rel="stylesheet">

</head>
<!-- GB: todo: add duration header/property -->
<body data-duration="45">

<header id="intro" class="slide">
	<h1>未知の古典テキストに対し単語分割をする手法の紹介</h1>
	<p class="attribution">YUUKIToriyama</p>
</header>
<!-- >
	<section class="slide" id="navigation">
		<h2>CSSS Navigation</h2>
		<p>Only through keyboard for now :(</p>
		<ul>
			<li>→ or ↓ to advance to the next slide or incrementally displayed item</li>
			<li>← or ↑ to go to the previous slide or incrementally displayed item</li>
			<li>Ctrl* + → or Ctrl* + ↓ to jump to the next slide</li>
			<li>Ctrl* + ← or Ctrl* + ↑ to jump to the previous slide</li>
			<li>Home to go to the first slide, End to go to the last</li>
			<li>Ctrl* + G to jump to an arbitrary slide (by slide number or identifier)</li>
		</ul>
		<p>* Ctrl or Shift actually. Only Shift works in Opera.</p>
	</section>

	<section class="slide">
		<h2>CSSS Navigation Cont.</h2>

		<p>Thumbnail view</p>
		<ul>
		  <li>Press Ctrl+H (or Shift+H if you're in Opera) now.</li>
		  <li>Press Ctrl+Shift+H to see all slides (warning: can be slow!)</li>
		</ul>

		<p>Presenter view</p>
		<ul>
		  <li>This slide has presenter notes. They are only visible in presenter view (Ctrl+P or Shift+P).</li>
		</ul>
		<p class="presenter-notes">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

	</section>
<!-->

  <section class="slide">
    
<!-- _S9SLIDE_ -->
<h1 id="未知の古典テキストに対し単語分割をする手法の紹介">未知の古典テキストに対し単語分割をする手法の紹介</h1>
<p>鳥山柚樹</p>

<p>2019/05/14</p>



  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->




  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->
<h1 id="はじめに">はじめに</h1>


  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->
<h2 id="形態素解析ツールが通用しない">形態素解析ツールが通用しない</h2>
<ul>
  <li>古典籍を解析するための辞書は万能ではない
    <ul>
      <li>同時代の作品ならまだしも何百年も時間が離れていると語彙や文法が違ってくる</li>
      <li>汎用性のある解析用辞書を作ることができない</li>
    </ul>
  </li>
  <li>別な方法を用いる必要がある
    <ul>
      <li><strong>文字Nグラムの頻度分析</strong></li>
    </ul>
  </li>
</ul>



  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->




  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->
<h1 id="参考にした論文">参考にした論文</h1>
<ul>
  <li>『文字Nグラムの出現確率を利用した単語分割』「人文科学とコンピュータシンポジウム」(2011年12月)
    <ul>
      <li><a href="https://ci.nii.ac.jp/naid/170000068415">https://ci.nii.ac.jp/naid/170000068415</a></li>
    </ul>
  </li>
</ul>



  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->




  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->
<h1 id="どのような手法か">どのような手法か</h1>
<ul>
  <li>雑に言うと
    <ul>
      <li>ほかの文章で用例があればそれを単語とみなす、なければそれは単語じゃない</li>
    </ul>
  </li>
  <li>もう少し丁寧に
    <ol>
      <li>調べたい文字列を細切れにする</li>
      <li>その細切れのそれぞれに対し、他の文章のなかで何回それが出現するかをカウントする</li>
      <li>出現頻度が高い「細切れ」は単語である可能性が高い</li>
      <li>1~3の繰り返しで文章を単語に分割してゆく</li>
    </ol>
  </li>
</ul>



  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->




  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->
<h1 id="n-gramとは">N-gramとは</h1>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">puts</span> <span class="s2">"南無妙法蓮華経"</span><span class="p">.</span><span class="nf">to_ngrams</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="c1">#N = 4のとき</span>

<span class="err">南無妙法</span>
<span class="err">無妙法蓮</span>
<span class="err">妙法蓮華</span>
<span class="err">法蓮華経</span>
</code></pre></div></div>

<pre><code class="language-ruby:to_ngrams.rb">class String
	def to_ngrams(n)
		arr = []
		for i in 0..self.length-n
			arr.push(self[i..i+n-1])
		end
		return arr
	end
end
</code></pre>



  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->




  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->
<h1 id="n-gramn123">N-gram(N=1,2,3,…)</h1>

<ul>
  <li>未知の文「有八百弟子」をぶつ切りに
    <ul>
      <li>1-gram: 有	八	百	弟	子</li>
      <li>2-gram: 有八	八百	百弟	弟子</li>
      <li>3-gram: 有八百	八百弟	百弟子</li>
      <li>4-gram: 有八百弟	八百弟子</li>
      <li>5-gram: 有八百弟子</li>
    </ul>
  </li>
  <li>長さlの文字列を単語に分割する方法は$(l+1)l/2$通りある
    <ul>
      <li>$(l+1)l/2$個の要素それぞれに対してそれが単語である確率(単語尤度)を計測する</li>
      <li>もっとも数値が高いものを単語として認識する</li>
    </ul>
  </li>
</ul>



  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->




  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->
<h2 id="単語尤度の定義１">単語尤度の定義１</h2>
<ul>
  <li>$g$ : gram</li>
  <li>$c$ : character</li>
  <li>$c_1,c_2,…c_l$ : 長さlのgramを構成する文字の集合
    <ul>
      <li>例
        <ul>
          <li>$g:= 法華経$</li>
          <li>$c_1 = 法, c_2 = 華, c_3 = 経$</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>$f(x)$ : frequency, xが出現する頻度(確率)
    <ul>
      <li>$f(x) := \frac{(文章中で文字列xが登場する回数)}{(文章の総文字数)}$</li>
    </ul>
  </li>
  <li>$L(x)$ : likelihood, gramの単語尤度
    <ul>
      <li>$L(g) := \frac{1}{1-n}\frac{1}{\ln f(g)}\ln \frac{f(g)}{f(c_1)f(c_2)…f(c_l)}$</li>
    </ul>
  </li>
</ul>



  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->




  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->
<h2 id="単語尤度の定義２">単語尤度の定義２</h2>
<ul>
  <li>gram「吉野」の単語尤度
    <ul>
      <li>日本書紀の総文字数は217427</li>
      <li>吉野は78回、吉は267回、野は369回出現する
        <ul>
          <li>$f(吉野) = \frac{78}{217427}$</li>
          <li>$f(吉) = \frac{267}{217427}$</li>
          <li>$f(野) = \frac{369}{217427}$</li>
        </ul>
      </li>
      <li>ゆえに単語尤度は
        <ul>
          <li>$L(吉野) = \frac{1}{1-2}\frac{\ln \frac{\frac{78}{217427}}{\frac{267}{217427}\frac{369}{217427}}}{\ln \frac{78}{217427}} = 0.6489777667399772$</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>



  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->




  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->
<h2 id="例">例</h2>
<ul>
  <li>$L(吉野)$ の単語尤度は高い
    <ul>
      <li>⇒<strong>「吉野」は一つの単語である可能性が高い</strong></li>
      <li><em>注、本来は尤度の高低をいうときには他との比較でなければいけない</em></li>
    </ul>
  </li>
</ul>



  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->




  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->
<h1 id="単語決定のアルゴリズム">単語決定のアルゴリズム</h1>
<ol>
  <li>先頭から１０文字切り出す(長さが１０文字以上もある単語は日本語に存在しないと仮定しているから)</li>
  <li>その１０文字に対してNグラムを計算する</li>
  <li>その中で最も単語尤度が高いNグラムを見つける
    <ul>
      <li>そのNグラムが先頭にある場合はそれを単語と認識する(1に戻る)</li>
      <li>そうでない場合はそのNグラムより手前にある文字列を取り出し、更に細かい分析をする(2に戻る)
の繰り返し</li>
    </ul>
  </li>
</ol>



  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->




  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->
<h1 id="実装例">実装例</h1>
<p><a href="https://github.com/YUUKIToriyama/wakaba">YUUKIToriyama/wakaba</a></p>
<ul>
  <li>四時間で作った(設計が💩)</li>
  <li>rubyなので速度が微妙</li>
</ul>



  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->




  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->
<h1 id="自作プログラムでの実験">自作プログラムでの実験</h1>
<ul>
  <li>日本書紀全３０巻のテキストデータをもとに第１巻冒頭部分の単語分割をやってみた</li>
  <li>冒頭部分
    <blockquote>
      <p>古天地未剖陰陽不分渾沌如鶏子溟涬而含牙及其淸陽者薄靡而爲天重濁者淹滯而爲地精妙之合搏易重濁之凝竭難故天先成而地後定然後神聖生其中焉故曰開闢之初洲壞浮漂譬猶游魚之浮水上也于時天地之中生一物狀如葦牙便化爲神號國常立尊至貴曰尊自餘曰命並訓美舉等也下皆效此次國狹槌尊次豐斟渟尊凡三神矣乾道獨化所以成此純男</p>
    </blockquote>
  </li>
</ul>



  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->




  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->
<h1 id="結果">結果</h1>
<ul>
  <li>訓読
    <blockquote>
      <p>古に天地未だ剖れず、陰陽分れず、混沌にして鶏子の如く、溟涬にして牙を含めり。其の清陽なる者は、靡きて天に為り、重濁なる者は、淹滯りて地に為るに及りて、精妙の合搏するところ易く、重濁の凝竭すること難し。故、天先づ成りて地後に定まる。然して後に神聖其の中に生れり。</p>
    </blockquote>
  </li>
  <li>結果
    <blockquote>
      <table>
        <tbody>
          <tr>
            <td>古</td>
            <td>天地</td>
            <td>未剖</td>
            <td>陰</td>
            <td>陽</td>
            <td>不</td>
            <td>分</td>
            <td>渾</td>
            <td>沌</td>
            <td>如</td>
            <td>鶏</td>
            <td>子</td>
            <td>溟</td>
            <td>涬</td>
            <td>而</td>
            <td>含牙</td>
            <td>及其</td>
            <td>淸</td>
            <td>陽</td>
            <td>者</td>
            <td>薄</td>
            <td>靡而</td>
            <td>爲天</td>
            <td>重</td>
            <td>濁</td>
            <td>者</td>
            <td>淹滯</td>
            <td>而爲</td>
            <td>地</td>
            <td>精</td>
            <td>妙</td>
            <td>之</td>
            <td>合</td>
            <td>搏</td>
            <td>易</td>
            <td>重</td>
            <td>濁</td>
            <td>之</td>
            <td>凝</td>
            <td>竭難</td>
            <td>故天</td>
            <td>先</td>
            <td>成</td>
            <td>而</td>
            <td>地</td>
            <td>後定</td>
            <td>然</td>
            <td>後神</td>
            <td>聖生</td>
            <td>其中</td>
            <td>焉故</td>
            <td>曰</td>
            <td>開闢</td>
            <td>之初</td>
            <td>洲</td>
            <td>壞</td>
            <td>浮漂</td>
            <td>譬</td>
            <td>猶</td>
            <td>游魚</td>
            <td>之浮</td>
            <td>水上</td>
            <td>也于</td>
            <td>時天</td>
            <td>地</td>
            <td>之中</td>
            <td>生一</td>
            <td>物</td>
            <td>狀如</td>
            <td>葦牙</td>
            <td>便化</td>
            <td>爲神</td>
            <td>號國</td>
            <td>常</td>
            <td>立尊</td>
            <td>至</td>
            <td>貴曰</td>
            <td>尊自</td>
            <td>餘</td>
            <td>曰</td>
            <td>命</td>
            <td>並</td>
            <td>訓</td>
            <td>美舉</td>
            <td>等也</td>
            <td>下皆</td>
            <td>效此</td>
            <td>次國</td>
            <td>狹槌</td>
            <td>尊</td>
            <td>次</td>
            <td>豐</td>
            <td>斟渟</td>
            <td>尊凡</td>
            <td>三神</td>
            <td>矣</td>
            <td>乾</td>
            <td>道</td>
            <td>獨化</td>
            <td>所以</td>
            <td>成</td>
            <td>此</td>
            <td>純男</td>
          </tr>
        </tbody>
      </table>
    </blockquote>
  </li>
</ul>

  </section>



<!--
<footer class="slide">
	<h2>Thank you!</h2>
	<p>Closing remarks</p>
</footer>
-->

<script src="slideshow.js"></script>

<!-- Make sure the reference to -prefix-free works -->
<script src="prefixfree.min.js"></script>

<!-- Uncomment the plugins you need
<script src="plugins/css-edit.js"></script>
<script src="plugins/css-snippets.js"></script>
<script src="plugins/css-controls.js"></script>
-->
<script>var slideshow = new SlideShow();

</script>

</body>
</html>
